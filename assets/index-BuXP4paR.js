import{r as d,j as t}from"./react-CWupyEIp.js";import{c as Le}from"./react-dom-VCwjLMmb.js";import{u as z,a as D,s as U,P as Fe}from"./react-redux-lufdH4nZ.js";import{i as de}from"./i18next-CIEwNdMy.js";import{B as Me}from"./i18next-browser-languagedetector-RoqpcJAD.js";import{i as H,a as ue,p as ce,b as pe,c as ze,d as Ge}from"./lodash-D2vEjal1.js";import{a as me}from"./js-cookie-Cz0CWeBA.js";import{i as Ue,u as F}from"./react-i18next-BrwsTrR0.js";import{c as V,a as Ae,b as Pe}from"./@reduxjs-MWQmrvzG.js";import{t as Be}from"./redux-thunk-ClJT1hhx.js";import{c as Q}from"./tailwindcss-BDwuR9Gb.js";import{H as He}from"./react-router-dom-CjmWq2Hl.js";import{P as s}from"./prop-types-CQ0OIHYe.js";import{i as Ke,p as te,E as We,F as Qe}from"./react-contexify-DUBhUkXT.js";import{F as Ye,a as Je,b as Ve,c as Ze,M as Xe,G as et,d as tt,e as rt,f as ot,g as nt,h as at,i as st}from"./react-icons-vW0pnGRI.js";import{C as ae,R as ct}from"./pretty-checkbox-react-DrXb9Xoa.js";import{_ as it}from"./react-spinners-BdeI7hdQ.js";import{d as re}from"./chinese-conv-CbsDIUcB.js";import{C as ge}from"./clipboard-vqTQgCbH.js";import{t as lt}from"./html-to-image-Cnhg7C0r.js";import{h as dt}from"./moment-C5S46NFB.js";/* empty css                 */import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-DpKzF1FG.js";import"./redux-DITMfSWq.js";import"./immer-AZmEbvJU.js";import"./reselect-DyB87yl0.js";import"./picocolors-CBpy9uNM.js";import"./react-router-D0a0eGYo.js";import"./@remix-run-ByPv_JRW.js";import"./clsx-CH7BE6MN.js";import"./react-merge-refs-BIBY5Z5W.js";import"./nanoid-Cpg-fJ3N.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function c(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=c(r);fetch(r.href,o)}})();const ut=(n="",e=null)=>{!n&&!e||me.set(n,e,{expires:365})},Y=(n="")=>me.get(n),pt="formation × share",mt="Mythic",gt="Exalted",ht="Legend",ft="Other",bt="Warrior",yt="Defender",xt="Magician",kt="Supporter",wt="Star",$t="Name",vt="Normal",qt="Show",Ct="Bold",jt="Please enter a keyword",Nt="Reverse",St="Reset",Tt="TurnOrder",Rt="CopyLink",Dt="Download",It="Select the mercenary list, and click the formation. Or just drag and drop.",_t="Drag the mercenary in the grid to change the position.",Ot="Right click can set skill enhancement level.",Et="Double-click or drag to the right to remove the mercenaries in the grid.",Lt="Click [turnorder] to setup priority.",Ft="Click [download] to get image or [copylink] get share link.",Mt={title:pt,mythic:mt,exalted:gt,legend:ht,other:ft,attacker:bt,defender:yt,magician:xt,supporter:kt,star:wt,name:$t,normal:vt,show:qt,bold:Ct,search:jt,"show-content":"Content","mercenary-type":"Type","mercenary-queue":"Queue","background-color":"Bg Color","background-grid":"Bg Grid",reverse:Nt,"image-width":"Width","image-width-custom":"Custom:",reset:St,queue:Tt,copylink:Rt,download:Dt,tip1:It,tip2:_t,tip3:Ot,tip4:Et,tip5:Lt,tip6:Ft,"browser-mobile-alert":"The desktop is better than the mobile."},zt="mercenario × compartir",Gt="Mítico",Ut="Exaltado",At="Leyenda",Pt="Otro",Bt="Guerrero",Ht="Defensor",Kt="Mago",Wt="Soporte",Qt="estrella",Yt="Nombre",Jt="Normal",Vt="Mostrar",Zt="Negrita",Xt="Por favor ingrese una palabra clave",er="Inversa",tr="Reiniciar",rr="Giro",or="CopiarLink",nr="Descargar",ar="Seleccione la lista de mercenarios y haga clic en la formación. O simplemente arrastrar y soltar.",sr="Arrastre el mercenario en la cuadrícula para cambiar la posición.",cr="El clic derecho puede establecer el nivel de mejora de habilidades.",ir="Haga doble clic o arrastre hacia la derecha para eliminar los mercenarios en la cuadrícula.",lr="Haga clic en [giro] para configurar la prioridad.",dr="Haga clic en [descargar] para obtener la imagen o [copylink] obtener el enlace para compartir.",ur={title:zt,mythic:Gt,exalted:Ut,legend:At,other:Pt,attacker:Bt,defender:Ht,magician:Kt,supporter:Wt,star:Qt,name:Yt,normal:Jt,show:Vt,bold:Zt,search:Xt,"show-content":"Contenido","mercenary-type":"Tipo","mercenary-queue":"Cola","background-color":"Color","background-grid":"Cuadrícula",reverse:er,"image-width":"Anchura","image-width-custom":"otro:",reset:tr,queue:rr,copylink:or,download:nr,tip1:ar,tip2:sr,tip3:cr,tip4:ir,tip5:lr,tip6:dr,"browser-mobile-alert":"El escritorio es mejor que el móvil."},pr="formation × teilen",mr="Mythisch",gr="Erhaben",hr="Legende",fr="Andere",br="Krieger",yr="Verteidiger",xr="Magier",kr="Unterstützer",wr="Star",$r="Name",vr="Normal",qr="Show",Cr="Fett",jr="Bitte geben Sie ein Schlüsselwort ein",Nr="Umkehren",Sr="Neu",Tr="TurnOrder",Rr="LinkKopieren",Dr="Herunterladen",Ir="Wählen Sie die Söldnerliste aus und klicken Sie auf die Formation. Oder einfach per Drag & Drop.",_r="Ziehen Sie den Söldner in das Raster, um die Position zu ändern.",Or="Ein Rechtsklick kann die Fähigkeitsverbesserungsstufe festlegen.",Er="Doppelklicken oder ziehen Sie nach rechts, um die Söldner im Raster zu entfernen.",Lr="Klicken Sie auf [turnorder], um die Priorität festzulegen.",Fr="Klicken Sie auf [download], um ein Bild zu erhalten, oder auf [copylink], um den Link zum Teilen zu erhalten.",Mr={title:pr,mythic:mr,exalted:gr,legend:hr,other:fr,attacker:br,defender:yr,magician:xr,supporter:kr,star:wr,name:$r,normal:vr,show:qr,bold:Cr,search:jr,"show-content":"Inhalt","mercenary-type":"Art","mercenary-queue":"Queue","background-color":"Farbe","background-grid":"Gitter",reverse:Nr,"image-width":"Breite","image-width-custom":"Sitte:",reset:Sr,queue:Tr,copylink:Rr,download:Dr,tip1:Ir,tip2:_r,tip3:Or,tip4:Er,tip5:Lr,tip6:Fr,"browser-mobile-alert":"Der Desktop ist besser als das Handy."},zr="棕色塵埃 × 陣型分享",Gr="神話",Ur="超越",Ar="傳說",Pr="其他",Br="攻擊",Hr="防禦",Kr="魔法",Wr="支援",Qr="星級",Yr="名稱",Jr="一般",Vr="顯示",Zr="粗體",Xr="請輸入關鍵字",eo="圖片反向",to="重置",ro="順序",oo="複製連結",no="下載",ao="在列表中選擇傭兵，然後單擊陣型。或者拖曳頭像。",so="拖動網格中的僱傭兵以更改位置。",co="右鍵傭兵可以設定技能強化等級。",io="雙擊或是拖曳至右側可以移除網格中的傭兵。",lo="點擊[順序]按鈕來設置出手先後順序。",uo="點擊[下載]取得圖片，或點擊[複製連結]取得網址。",po={title:zr,mythic:Gr,exalted:Ur,legend:Ar,other:Pr,attacker:Br,defender:Hr,magician:Kr,supporter:Wr,star:Qr,name:Yr,normal:Jr,show:Vr,bold:Zr,search:Xr,"show-content":"顯示內容","mercenary-type":"傭兵類型","mercenary-queue":"出手順序","background-color":"背景顏色","background-grid":"背景方格",reverse:eo,"image-width":"圖片寬度","image-width-custom":"自定義：",reset:to,queue:ro,copylink:oo,download:no,tip1:ao,tip2:so,tip3:co,tip4:io,tip5:lo,tip6:uo,"browser-mobile-alert":"桌面瀏覽比手機更好。"},mo="棕色尘埃 × 阵型分享",go="神话",ho="超越",fo="传说",bo="其他",yo="攻击",xo="防御",ko="魔法",wo="支援",$o="星级",vo="名称",qo="一般",Co="显示",jo="粗体",No="请输入关键字",So="图片反向",To="重置",Ro="顺序",Do="复制连结",Io="下载",_o="在列表中选择佣兵，然后单击阵型。或者拖曳头像。",Oo="拖动网格中的僱佣兵以更改位置。",Eo="右键佣兵可以设定技能强化等级。",Lo="双击或是拖曳至右侧可以移除网格中的佣兵。",Fo="点击[顺序]按钮来设置出手先后顺序。",Mo="点击[下载]取得图片，或点击[复制连结]取得网址。",zo={title:mo,mythic:go,exalted:ho,legend:fo,other:bo,attacker:yo,defender:xo,magician:ko,supporter:wo,star:$o,name:vo,normal:qo,show:Co,bold:jo,search:No,"show-content":"显示内容","mercenary-type":"佣兵类型","mercenary-queue":"出手顺序","background-color":"背景颜色","background-grid":"背景方格",reverse:So,"image-width":"图片宽度","image-width-custom":"自定义：",reset:To,queue:Ro,copylink:Do,download:Io,tip1:_o,tip2:Oo,tip3:Eo,tip4:Lo,tip5:Fo,tip6:Mo,"browser-mobile-alert":"桌面浏览比移动更好。"},Go="形成 × 共有する",Uo="神話",Ao="超越",Po="伝説",Bo="その他",Ho="攻撃",Ko="防衛",Wo="魔法",Qo="サポート",Yo="星印",Jo="お名前",Vo="全般",Zo="ディスプレイ",Xo="太字",en="キーワードを入力してください",tn="フリップ",rn="リセットする",on="キュー",nn="リンクをコピー",an="ダウンロードする",sn="アバターを選択し、フォーメーションをクリックします。",cn="グリッド内の傭兵をドラッグして位置を変更します。",ln="右クリックでスキル強化レベルを設定できます。",dn="右側をダブルクリックまたはドラッグして削除します。",un="ターンオーダーボタンをクリックして、優先順位を設定します。",pn="[ダウンロード]ボタンをクリックして画像を取得します。",mn={title:Go,mythic:Uo,exalted:Ao,legend:Po,other:Bo,attacker:Ho,defender:Ko,magician:Wo,supporter:Qo,star:Yo,name:Jo,normal:Vo,show:Zo,bold:Xo,search:en,"show-content":"画像内容","mercenary-type":"種類","mercenary-queue":"順序","background-color":"背景色","background-grid":"グリッド",reverse:tn,"image-width":"画像の幅","image-width-custom":"カスタム：",reset:rn,queue:on,copylink:nn,download:an,tip1:sn,tip2:cn,tip3:ln,tip4:dn,tip5:un,tip6:pn,"browser-mobile-alert":"デスクトップはモバイルよりも優れています。"},gn="진형 × 순서",hn="신화",fn="초월",bn="전설",yn="기타",xn="공격",kn="방어",wn="마법",$n="지원",vn="별",qn="이름",Cn="정상",jn="보기",Nn="진하게",Sn="키워드를 입력하십시오",Tn="뒤집기",Rn="초기화",Dn="순서",In="링크 복사",_n="다운로드",On="아바타를 선택하고 포메이션을 클릭하십시오.",En="그곳에서 용병을 끌어서 위치를 변경하십시오.",Ln="마우스 오른쪽 버튼을 클릭하면 강화 수준을 설정할 수 있습니다.",Fn="더블 클릭하거나 드래그하여 제거하십시오.",Mn="우선 순위를 설정하려면 턴 오더 버튼을 클릭하십시오.",zn="[다운로드] 버튼을 클릭하여 이미지를 가져옵니다.",Gn={title:gn,mythic:hn,exalted:fn,legend:bn,other:yn,attacker:xn,defender:kn,magician:wn,supporter:$n,star:vn,name:qn,normal:Cn,show:jn,bold:Nn,search:Sn,"show-content":"콘텐츠","mercenary-type":"유형","mercenary-queue":"큐","background-color":"배경색","background-grid":"그리드",reverse:Tn,"image-width":"너비","image-width-custom":"수동 :",reset:Rn,queue:Dn,copylink:In,download:_n,tip1:On,tip2:En,tip3:Ln,tip4:Fn,tip5:Mn,tip6:zn,"browser-mobile-alert":"데스크탑은 모바일보다 낫습니다."},Un="ทหารรับจ้าง × หุ้น",An="ตำนาน",Pn="เลิศล",Bn="ตำนาน",Hn="อื่นๆ",Kn="โจมตี",Wn="ป้องกัน",Qn="เวทมนตร์",Yn="สนับสนุน",Jn="ดาว",Vn="ชื่อ",Zn="ปกติ",Xn="แสดง",ea="กล้า",ta="กรุณาใส่คำค้นหา",ra="ย้อนกลับ",oa="ตั้งค่าใหม่",na="เปิดคำสั่งซื้อ",aa="คัดลอกลิงค์",sa="ดาวน์โหลด",ca="เลือกรายการทหารรับจ้างและคลิกที่รูปแบบ หรือเพียงแค่ลากและวาง",ia="ลากทหารรับจ้างในกริดเพื่อเปลี่ยนตำแหน่ง",la="คลิกขวาสามารถกำหนดระดับการปรับปรุงทักษะ",da="ดับเบิลคลิกหรือลากไปทางขวาเพื่อลบทหารรับจ้างในตาราง",ua="คลิก [เปิดคำสั่งซื้อ] เพื่อตั้งค่าลำดับความสำคัญ",pa="คลิก [ดาวน์โหลด] เพื่อรับภาพหรือ [คัดลอกลิงค์] รับลิงก์แชร์",ma={title:Un,mythic:An,exalted:Pn,legend:Bn,other:Hn,attacker:Kn,defender:Wn,magician:Qn,supporter:Yn,star:Jn,name:Vn,normal:Zn,show:Xn,bold:ea,search:ta,"show-content":"เนื้อหา","mercenary-type":"ชนิด","mercenary-queue":"คิว","background-color":"สี","background-grid":"ตะแกรง",reverse:ra,"image-width":"ความกว้าง","image-width-custom":"กำหนดเอง:",reset:oa,queue:na,copylink:aa,download:sa,tip1:ca,tip2:ia,tip3:la,tip4:da,tip5:ua,tip6:pa,"browser-mobile-alert":"เดสก์ท็อปดีกว่ามือถือ"},oe={US:{label:"English",flagUrl:"https://flagcdn.com/us.svg",translation:Mt},ES:{label:"Español",flagUrl:"https://flagcdn.com/es.svg",translation:ur},DE:{label:"German",flagUrl:"https://flagcdn.com/de.svg",translation:Mr},TW:{label:"繁體中文",flagUrl:"https://flagcdn.com/tw.svg",translation:po},CN:{label:"简体中文",flagUrl:"https://flagcdn.com/cn.svg",translation:zo},JP:{label:"日本語",flagUrl:"https://flagcdn.com/jp.svg",translation:mn},KR:{label:"한국어",flagUrl:"https://flagcdn.com/kr.svg",translation:Gn},TH:{label:"ไทย",flagUrl:"https://flagcdn.com/th.svg",translation:ma}},ga=H(Y("locale"))?"US":Y("locale");de.use(Me).use(Ue).init({resources:oe,lng:ga,keySeparator:!1,interpolation:{escapeValue:!1}});const ha={list:[]},he=V({name:"characters",initialState:ha,reducers:{setCharacters(n,e){ue(e.payload)&&(n.list=e.payload)}}}),{setCharacters:fa}=he.actions,ba=he.reducer,ya={list:[]},fe=V({name:"charactersGlobal",initialState:ya,reducers:{setCharactersGlobal(n,e){ue(e.payload)&&(n.list=e.payload)}}}),{setCharactersGlobal:xa}=fe.actions,ka=fe.reducer,wa=[{id:"a1",top:"9px",left:"11px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"a2",top:"9px",left:"125px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"a3",top:"9px",left:"239px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"a4",top:"9px",left:"354px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"a5",top:"9px",left:"468px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"a6",top:"9px",left:"582px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"b1",top:"123px",left:"11px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"b2",top:"123px",left:"126px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"b3",top:"123px",left:"240px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"b4",top:"123px",left:"354px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"b5",top:"123px",left:"468px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"b6",top:"123px",left:"582px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"c1",top:"238px",left:"12px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"c2",top:"238px",left:"126px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"c3",top:"238px",left:"240px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"c4",top:"238px",left:"354px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"c5",top:"238px",left:"468px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0},{id:"c6",top:"237px",left:"582px",type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0}],be={formation:wa,options:{type:!0,backcolor:!0,backimage:!0,queue:!0,reverse:!1},ref:null,queueMode:!1,queueMax:12,queue:[],levelDialog:{show:!1,left:0,top:0,id:null},mercenarySelected:null},$a={...be},ie=["type","backgroundImage","uniqueCode","queue","level"],ye=V({name:"dataset",initialState:$a,reducers:{setRef:(n,e)=>{n.ref=e.payload},setFormation:(n,e)=>{n.formation=e.payload},setLevelDialog:(n,e)=>{n.levelDialog=e.payload},setMercenarySelected:(n,e)=>{n.mercenarySelected=e.payload},setOptions:(n,e)=>{n.options=e.payload},setQueue:(n,e)=>{n.queue=e.payload},setQueueMode:(n,e)=>{n.queueMode=e.payload},reset(){return window.history.replaceState({},"",location.origin),{...be}}}}),{setRef:va,setFormation:O,setLevelDialog:xe,setMercenarySelected:P,setOptions:qa,setQueue:ke,setQueueMode:le,reset:Ca}=ye.actions,ja=ye.reducer,we=V({name:"settings",initialState:{locale:Y("locale")===void 0?"US":Y("locale")},reducers:{setLocale(n,e){de.changeLanguage(e.payload),ut("locale",e.payload),n.locale=e.payload}}}),{setLocale:Na}=we.actions,Sa=we.reducer,Ta="https://api.browndust.info",Ra="https://browndust.info/resource/thumbnail",M="https://browndust.info/resource/icon",$e="https://book.browndust.app/detail.html?id=",Da=n=>{const e={backgroundColor:""};switch(n){case 1:e.backgroundColor=Q.yellow[800];break;case 2:e.backgroundColor=Q.indigo[800];break;case 3:e.backgroundColor=Q.violet[800];break;case 4:e.backgroundColor=Q.lime[800];break}return e},Ia=n=>{const e={backgroundImage:""};switch(n){case 1:e.backgroundImage=`url(${M}/icon_charType__warrior.png)`;break;case 2:e.backgroundImage=`url(${M}/icon_charType__defender.png)`;break;case 3:e.backgroundImage=`url(${M}/icon_charType__magician.png)`;break;case 4:e.backgroundImage=`url(${M}/icon_charType__supporter.png)`;break}return e},_a=n=>{const e={backgroundImage:""};switch(n){case 0:break;case 1:break;case 2:e.backgroundImage=`url(${M}/icon_charType__legend.png)`;break;case 3:e.backgroundImage=`url(${M}/icon_charType__warrior.png)`;break;case 4:e.backgroundImage=`url(${M}/icon_charType__defender.png)`;break;case 5:e.backgroundImage=`url(${M}/icon_charType__magician.png)`;break;case 6:e.backgroundImage=`url(${M}/icon_charType__supporter.png)`;break}return e},J=(n=!1)=>{if(!n)return null;const e=n.split("*")[1];return`${Ra}/${e}.png`},Oa=(n,e=null,c=e/2)=>new Promise(a=>{const r=document.createElement("img");r.onload=()=>{const o=document.createElement("canvas"),i=o.getContext("2d");e!==null&&(o.width=e),c!==null&&(o.height=c),i.drawImage(r,0,0,e,c);const p=o.toDataURL();a(p)},r.src=n,r.crossOrigin="use-credentials"}),Ea=(n=[])=>n.length===0?!1:"https://browndust.info/#/"+n.filter(c=>c.uniqueCode!==0).map(c=>`o${c.id}o${c.uniqueCode}o${c.queue===0?"":c.queue}o${c.level===0?"":c.level}`).join("."),La=(n=[],e=[])=>{const c=[...n];return window.location.hash.replace("#/","").split(".").filter(String).map(a=>{const r=a.split("o");if(r.shift(),r.length===0)return console.warn("Invalid url params.",a),r;const o=String(r[0]),i=n.find(({id:k})=>k===String(r[0]));if(H(i))return console.warn("Invalid url param: id",o),r;const p=Number(r[1]),h=e.find(({_uniqueCode:k})=>k===p);if(H(h))return console.warn("Invalid url params: uniqueCode",p),r;const u=Number(h._type),$=`url(${J(h._uiIconImageName)})`,l=Number(r[2])>0?Number(r[2]):0;let g=Number(r[3])>0?Number(r[3]):0;return g=isNaN(g)?0:g,{id:o,uniqueCode:p,type:u,backgroundImage:$,queue:l,level:g}}).forEach(a=>{const r=n.findIndex(o=>o.id===a.id);r!==-1&&(c[r]={...n[r],...a})}),c},ve=Ae(),Fa=async(n,e)=>{const c=e.getState(),a=Ea(c.dataset.formation);a!==window.location.href&&window.history.replaceState({},"",a)};ve.startListening({actionCreator:O,effect:Fa});const Ma=Pe({reducer:{characters:ba,charactersGlobal:ka,dataset:ja,settings:Sa},middleware:n=>n().concat(Be,ve.middleware)}),za=async()=>fetch(Ta).then(n=>n.ok?n.json():console.warn("Change api url to github.")||fetch("https://raw.githubusercontent.com/explooosion/browndust-share/master/pre-work/getAll.json").then(e=>e.json())).catch(()=>console.warn("Change api url to github.")||fetch("https://raw.githubusercontent.com/explooosion/browndust-share/master/pre-work/getAll.json").then(n=>n.json())),Ga=async()=>fetch("https://global-api.browndust.info").then(n=>n.ok?n.json():console.warn("Change global api url to github.")||fetch("https://raw.githubusercontent.com/explooosion/browndust-share/master/pre-work/global/getAll.json").then(e=>e.json())).catch(()=>console.warn("Change global api url to github.")||fetch("https://raw.githubusercontent.com/explooosion/browndust-share/master/pre-work/global/getAll.json").then(n=>n.json())),qe=d.memo(function({selected:e,onSelect:c}){const[a,r]=d.useState(!1),[o,i]=d.useState({}),p=d.useRef(null),h=l=>{c(l),r(!1)},u=oe[e];d.useEffect(()=>{const l=g=>{p.current&&!p.current.contains(g.target)&&r(!1)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[p]);const $=l=>{i(g=>({...g,[l]:!0}))};return t.jsxs("div",{ref:p,className:"z-50 relative inline-block text-left",children:[t.jsx("div",{children:t.jsxs("button",{type:"button",className:"flex justify-center items-center w-full rounded-md border border-gray-600 shadow-sm px-4 py-2 bg-gray-800 text-sm font-medium text-white outline-none",id:"menu-button","aria-expanded":"true","aria-haspopup":"true",onClick:()=>r(!a),children:[t.jsx("img",{src:u.flagUrl,alt:u.label,className:"inline-block w-6 h-auto mr-2"}),u.label,t.jsx("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.44l3.71-3.21a.75.75 0 111.02 1.08l-4 3.5a.75.75 0 01-1.02 0l-4-3.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]})}),a&&t.jsx("div",{className:"origin-top-left absolute mt-2 w-44 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 overflow-y-auto max-h-60",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabIndex:"-1",children:t.jsx("div",{className:"py-1",role:"none",children:Object.entries(oe).map(([l,{label:g,flagUrl:k}])=>t.jsxs("button",{onClick:()=>h(l),className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 w-full text-left text-sm",role:"menuitem",tabIndex:"-1",children:[!o[l]&&t.jsx("div",{className:"inline-block w-6 h-6 mr-2 bg-gray-200 animate-pulse"}),t.jsx("img",{src:k,alt:g,className:`inline-block w-6 h-auto mr-2 ${o[l]?"":"hidden"}`,onLoad:()=>$(l)}),g]},l))})})]})});qe.propTypes={selected:s.string.isRequired,onSelect:s.func.isRequired};const Ua=d.memo(function(){const{t:e}=F(),c=z(),{locale:a}=D(o=>o.settings,U),r=o=>{c(Na(o))};return t.jsx("header",{className:"text-2xl",children:t.jsxs("div",{className:"relative flex justify-center items-center text-center lg:text-left",children:[t.jsx("h1",{children:t.jsxs("a",{href:"https://browndust.info/#/",className:"block text-yellow-500 no-underline text-4xl font-bold text-center",children:["BROWNDUST"," ",t.jsx("small",{className:"hidden sm:inline",children:e("title")})]})}),t.jsx("div",{className:"absolute top-0 left-2.5 font-sans text-gray-800",children:t.jsx(qe,{selected:a,onSelect:r})})]})})}),Ce=d.memo(function({id:e,left:c,top:a,mode:r}){const{t:o}=F(),i=z(),[p,h]=d.useState(0),{formation:u,levelDialog:$}=D(y=>({formation:y.dataset.formation,levelDialog:y.dataset.levelDialog}),U),l=y=>{if(H(y)||p>15||p<0)return;const C={levelDialog:$,formation:u};C.formation=u.map(q=>q.uniqueCode===y?{...q,level:p}:q),C.levelDialog={show:!1,id:null,left:0,top:0},i(xe(C.levelDialog)),i(O(C.formation))},g=y=>t.jsxs("div",{className:"w-[150px]",children:[t.jsx("h3",{className:"font-bold text-center text-gray-200 mb-2",children:o("Level")}),t.jsx("hr",{}),t.jsx("input",{type:"number",min:0,max:15,value:p,onChange:C=>h(C.target.value),onFocus:C=>C.target.select(),className:"w-full p-1 text-black",autoFocus:!0}),t.jsx("button",{type:"button",onClick:()=>l(y),className:"float-right mt-2 mb-1 w-16 h-6 text-lg text-black bg-gray-300 hover:bg-gray-200 rounded outline-none  active:bg-white",children:"OK"})]});let k=null;switch(r){case"level":k=g(e);break;default:k=null}return t.jsx("div",{id:"dialog",className:"absolute p-1.5 w-30 bg-gray-800 bg-opacity-95 border-4 border-gray-400 border-opacity-95 rounded-lg z-50",style:{left:`${c}px`,top:`${a-60}px`},children:k})});Ce.propTypes={id:s.number,top:s.number.isRequired,left:s.number.isRequired,mode:s.string.isRequired};const Aa=d.memo(function(){const e=z(),{formation:c,levelDialog:a,characters:r}=D(u=>({formation:u.dataset.formation,levelDialog:u.dataset.levelDialog,characters:u.characters.list}),U),o=d.useCallback(({props:u})=>{const{uniqueCode:$}=c.find(g=>g.uniqueCode===u.uniqueCode),{_uniqueCode:l}=r.find(g=>g._uniqueCode===$);window.open($e+l,"_blank")},[c,r]),i=d.useCallback(({event:u,props:$})=>{const l={...a,show:!0,left:u.clientX-50,top:u.clientY-50,id:$.uniqueCode};e(xe(l))},[a,e]),p=d.useCallback(({props:u})=>{const $=c.map(l=>l.uniqueCode===u.uniqueCode?{...l,level:0}:l);e(O($))},[c,e]),h=d.useCallback(({id:u,event:$,props:l})=>{({"ctmenu-item-link":o,"ctmenu-item-addLevel":i,"ctmenu-item-clearAll":p})[u]({event:$,props:l})},[o,i,p]);return t.jsxs(Ke,{id:"ctmenu",animation:"flip",className:"react-contexify w-56 bg-white rounded-lg shadow-lg",children:[t.jsxs(te,{id:"ctmenu-item-link",onClick:h,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[t.jsx(Ye,{className:"mr-2"}),"Mercenary Info"]}),t.jsxs(te,{id:"ctmenu-item-addLevel",onClick:h,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[t.jsx(Je,{className:"mr-2"}),"Add Level"]}),t.jsx(We,{className:"my-2 border-t border-gray-200"}),t.jsxs(te,{id:"ctmenu-item-clearAll",onClick:h,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[t.jsx(Ve,{className:"mr-2"}),"Clear Settings"]})]})}),Pa=d.memo(function(){const e=z(),{ref:c,characters:a,options:r,formation:o,levelDialog:i,queue:p,queueMode:h,mercenarySelected:u}=D(f=>({ref:f.dataset.ref,characters:f.characters.list,options:f.dataset.options,formation:f.dataset.formation,levelDialog:f.dataset.levelDialog,queue:f.dataset.queue,queueMode:f.dataset.queueMode,mercenarySelected:f.dataset.mercenarySelected}),U),{show:$}=Qe({id:"ctmenu"}),{type:l,backcolor:g,backimage:k,queue:y,reverse:C}=r,q=f=>{if(h)return;const w=o.map(b=>b.id===f?{...b,uniqueCode:0,backgroundImage:null,type:0,queue:0,level:0}:b);e(O(w))},I=(f,w)=>{let b=!1;const T=o.map(m=>m.id===f?(m.dragOver!==w&&(b=!0),{...m,dragOver:w}):m);b&&e(O(T))},x=(f,w)=>{f.preventDefault(),o.find(b=>w&&b.uniqueCode===w)&&$({event:f,props:{uniqueCode:w}})},E=f=>{const w=o.find(m=>m.id===f);if(w.uniqueCode&&h){const m={formation:[...o],queue:[...p]};let N=1;const S=m.queue.findIndex(j=>j.id===f);S>-1?m.queue=m.queue.filter(j=>j.id!==f):(m.queue.length>0&&(N=m.queue.length+1),m.queue.push({id:f,queue:N})),m.formation=m.formation.map(j=>j.id===f?{...j,queue:j.queue===0?N:0}:j),S>-1&&(m.queue=m.queue.map((j,v)=>({...j,queue:v+1}))),m.formation=m.formation.map(j=>{var v;if(j.queue>0){const A=((v=m.queue.find(_=>_.id===j.id))==null?void 0:v.queue)||0;return{...j,queue:A}}return j}),e(ke(m.queue)),e(O(m.formation))}const b=o.find(m=>m.uniqueCode===u);let T=[...o];if(b)T=o.map(m=>m.id===w.id?{...m,...ce(b,ie)}:m.id===b.id?{...m,...ce(w,ie)}:m);else{const m=a.find(({_uniqueCode:S})=>S===u);if(!m){e(P(null));return}const N=`
            url(${J(m._uiIconImageName)})`;T=T.map(S=>S.id===w.id?{...S,backgroundImage:N,type:Number(m._type),uniqueCode:m._uniqueCode,dragOver:!1}:S)}e(O(T)),e(P(null))},G=(f,w,b)=>{f.dataTransfer.setData("suCode",w),f.dataTransfer.setData("sid",b)},R=f=>{f.preventDefault()},K=(f,w)=>{f.preventDefault(),I(w,!0)},W=(f,w)=>{f.preventDefault(),I(w,!1)},Z=(f,w)=>{let b=[...o];const T=f.dataTransfer.getData("sid"),m=Number(f.dataTransfer.getData("suCode")),N=o.find(v=>v.id===w),S=o.find(v=>v.id===T),j=a.find(({_uniqueCode:v})=>v===m);if(m===N.uniqueCode||!j){b=b.map(v=>v.id===N.id?{...v,dragOver:!1}:v),e(O(b)),e(P(null));return}if(S&&N.uniqueCode&&S.uniqueCode!==N.uniqueCode)b=b.map(v=>v.id===N.id?{...v,dragOver:!1,uniqueCode:S.uniqueCode,backgroundImage:S.backgroundImage,type:S.type,queue:S.queue,level:S.level}:v.id===S.id?{...v,dragOver:!1,uniqueCode:N.uniqueCode,backgroundImage:N.backgroundImage,type:N.type,queue:N.queue,level:N.level}:v);else{const v=b.find(_=>_.uniqueCode===m),A=`
            url(${J(j._uiIconImageName)})`;b=b.map(_=>v&&_.id===v.id?{..._,dragOver:!1,uniqueCode:0,backgroundImage:null,type:0,queue:0,level:0}:_.id===N.id?{...N,backgroundImage:A,type:Number(j._type),uniqueCode:m,dragOver:!1}:_)}e(O(b)),e(P(null))},X=f=>{f.preventDefault()},ee=(f,w)=>o.map(({id:b,top:T,left:m,type:N,backgroundImage:S,uniqueCode:j,dragOver:v,queue:A,level:_})=>{const se=j>0;return t.jsxs("div",{className:`absolute w-[6.5rem] h-[6.5rem] bg-center bg-no-repeat bg-cover ${v?"bg-[rgba(200,200,255,0.3)] border border-yellow-500":""} ${se?"cursor-pointer":""}`,draggable:se,style:{top:T,left:m,backgroundImage:S,...g?Da(N):{},...C?{transform:"rotateY(180deg)"}:{}},onClick:()=>E(b),onDoubleClick:()=>q(b),onContextMenu:L=>x(L,j),onDragStart:L=>G(L,j,b),onDragOver:R,onDragEnter:L=>K(L,b),onDragLeave:L=>W(L,b),onDrop:L=>Z(L,b),onDragEnd:L=>X(L),children:[f?t.jsx("div",{className:"absolute top-0 right-0 w-9 h-9 bg-center bg-no-repeat",style:{...Ia(N)}}):null,w&&A>0?t.jsx("div",{className:"absolute top-0 left-0 flex items-center justify-center w-9 h-9 text-yellow-400 bg-black bg-opacity-50",style:{...C?{transform:"rotateY(180deg)"}:{}},children:A}):null,_>0?t.jsx("div",{className:"absolute bottom-1 left-1 flex justify-center items-center text-center w-12 text-white bg-blue-700 bg-opacity-70 rounded-full font-bold italic",style:{...C?{transform:"rotateY(180deg)"}:{}},children:_&&`+${_}`}):null]},`formation-${b}`)});return d.useEffect(()=>{e(va("formation"))},[]),t.jsxs("div",{id:c,className:`relative w-[700px] h-[350px] bg-center bg-cover bg-[#17293C] rounded border border-transparent ${k?"bg-[url('images/formation_background.jpg')]":"bg-none"}`,children:[ee(l,y),t.jsx(Aa,{}),i.show?t.jsx(Ce,{...i,mode:"level"}):null]})}),je=d.memo(function({currentType:e,setCurrentType:c}){const{t:a}=F(),r=[{type:null,filterType:0,growType:4,label:a("mythic")},{type:null,filterType:1,growType:3,label:a("exalted")},{type:null,filterType:2,growType:2,label:a("legend")},{type:1,filterType:3,growType:1,label:a("attacker")},{type:2,filterType:4,growType:1,label:a("defender")},{type:3,filterType:5,growType:1,label:a("magician")},{type:4,filterType:6,growType:1,label:a("supporter")},{type:null,filterType:7,growType:1,label:a("other")}];return t.jsx("div",{className:"flex items-center justify-between",children:r.map(o=>t.jsx(Ne,{typeObj:o,isActive:o.filterType===e.filterType,setCurrentType:c},`type-${o.type}-${o.filterType}-${o.growType}`))})}),Ne=({typeObj:n,isActive:e,setCurrentType:c})=>{const{type:a,filterType:r,growType:o,label:i}=n;return t.jsxs("button",{type:"button",className:`flex justify-center items-center w-20 h-11 text-white border border-gray-500 rounded shadow space-x-1 ${e?"bg-blue-500":"bg-gray-700"}`,onClick:()=>c({type:a,filterType:r,growType:o,label:i}),children:[[2,3,4,5,6].includes(r)&&t.jsx("i",{className:"w-7 h-7 bg-center bg-no-repeat bg-cover",style:_a(r)}),t.jsx("span",{className:"text-xs",children:i})]})};Ne.propTypes={typeObj:s.shape({type:s.number,filterType:s.number.isRequired,growType:s.number.isRequired,label:s.string}).isRequired,isActive:s.bool.isRequired,setCurrentType:s.func.isRequired};je.propTypes={currentType:s.shape({filterType:s.number.isRequired,type:s.number,growType:s.number.isRequired,label:s.string}).isRequired,setCurrentType:s.func.isRequired};const Se=d.memo(function(e){const{stars:c,setStars:a}=e,{t:r}=F(),o=p=>{a(h=>h.map(u=>u.label===p?{...u,checked:!u.checked}:u))},i=()=>c.map(({label:p,checked:h},u)=>t.jsx("div",{children:t.jsx(ae,{shape:"round",color:"info",animation:"jelly",icon:t.jsx("i",{className:"mdi mdi-check"}),checked:h,onChange:()=>o(p),children:t.jsx("span",{children:p})})},`star-${u}`));return t.jsxs("div",{className:"flex items-center text-md",children:[t.jsxs("div",{className:"flex justify-center items-center space-x-1",children:[t.jsx(Ze,{}),t.jsxs("span",{children:[r("star"),"："]})]}),i()]})});Se.propTypes={stars:s.arrayOf(s.shape({label:s.string.isRequired,checked:s.bool.isRequired,star:s.number.isRequired})).isRequired,setStars:s.func.isRequired};const Te=d.memo(function({nameOptions:e,setNameOptions:c}){const{t:a}=F(),r=i=>{c(p=>p.map(h=>h.label===i?{...h,checked:!h.checked}:h))},o=()=>e.map(({label:i,checked:p},h)=>t.jsx("div",{children:t.jsx(ae,{shape:"round",color:"info",animation:"jelly",icon:t.jsx("i",{className:"mdi mdi-check"}),checked:p,onChange:()=>r(i),children:t.jsx("span",{children:i})})},`name-${h}`));return t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsxs("span",{children:[a("name"),"："]}),o()]})});Te.propTypes={nameOptions:s.arrayOf(s.shape({label:s.string.isRequired,checked:s.bool.isRequired})).isRequired,setNameOptions:s.func.isRequired};const Re=d.memo(function(e){const{search:c,setSearch:a}=e,{t:r}=F();return t.jsx("input",{className:"w-full p-2 text-md bg-gray-800 border border-gray-600 rounded",type:"text",placeholder:r("search"),value:c,onChange:o=>a(o.target.value)})});Re.propTypes={search:s.string.isRequired,setSearch:s.func.isRequired};const De=d.memo(function({params:e,nameOptions:c}){const a=z(),r=D(x=>x.settings),o=D(x=>x.dataset.formation),i=D(x=>x.dataset.mercenarySelected),p=D(x=>x.charactersGlobal.list),{_uiIconImageName:h,_uniqueCode:u}=e,$=c.map(x=>x.checked),l=J(h),g=H(o.find(x=>x.uniqueCode===u))?1:.2,k=d.useCallback((x,E,G)=>{x.dataTransfer.setData("suCode",E),x.dataTransfer.setData("sid",G)},[]),y=d.useCallback(x=>{window.open($e+x,"_blank")},[]),C=d.useCallback(x=>{a(P(i===x?null:x))},[a,i]),q=d.useCallback((x,E)=>{if(pe(E))return"";const{_uniqueCode:G,_charName:R,_charName_ENG:K,_charName_TW:W,_charName_JAP:Z,_charName_SPA:X,_charName_GER:ee,_charName_TH:f}=E,w={US:K,ES:X,DE:ee,TW:W,CN:re.sify(W),JP:Z,KR:R,TH:f};let b=w[x]||K;const T=p.find(m=>m._uniqueCode===G);return T&&(b=w[x]||T._charName),ze(b)?T==null?void 0:T._charName:b},[p]),I=d.useMemo(()=>q(r.locale,e),[r.locale,e,q]);return t.jsx("div",{className:`relative w-16 h-16 bg-center bg-no-repeat bg-cover border border-gray-400 rounded transition-all ease-in-out duration-100 cursor-pointer text-xs m-2 ${$[0]?"before:block":"before:hidden"} ${$[1]?"before:font-bold":""} ${i===u&&g===1?"border-red-500":""} before:content-[attr(data-tooltip)]`,draggable:!0,style:{backgroundImage:`url(${l})`,opacity:g},"data-tooltip":I,onClick:()=>C(u),onDragStart:x=>k(x,u,0),onDoubleClick:()=>y(u)})});De.propTypes={nameOptions:s.arrayOf(s.shape({label:s.string.isRequired,checked:s.bool.isRequired})).isRequired,params:s.shape({_uiIconImageName:s.string.isRequired,_uniqueCode:s.number.isRequired}).isRequired};const Ie=d.memo(function(e){const{search:c,stars:a,currentType:r,nameOptions:o}=e,i=D(l=>l.characters.list),{charactersGlobal:p,settings:h}=D(l=>({charactersGlobal:l.charactersGlobal.list,settings:l.settings}),U),u=(l="",g)=>l===""?g:p.filter(k=>{const{_charName:y,_charName_ENG:C,_charName_TW:q,_charName_JAP:I,_charName_SPA:x,_charName_GER:E,_charName_TH:G}=k;let R=!1;switch(h.locale){case"US":R=C.includes(l);break;case"ES":R=x.includes(l);break;case"DE":R=E.includes(l);break;case"TW":R=q.includes(l)||re.sify(q).includes(l);break;case"CN":R=q.includes(l)||re.sify(q).includes(l);break;case"JP":R=I.includes(l);break;case"KR":R=y.includes(l);break;case"TH":R=G.includes(l);break;default:R=!0}return R}),$=l=>u(c,l).filter(g=>{const{_type:k,_star:y,_filterType:C}=g;if(c.trim().length>0)return!0;const q=I=>a.some((x,E)=>x.checked&&Number(I)===6-E);return pe(r.type)?r.filterType===Number(C)&&q(y):Ge(r.type)&&r.type===Number(k)&&q(y)}).map((g,k)=>t.jsx(De,{params:g,nameOptions:o},`mercenary-${k}`));return t.jsx("div",{className:"overflow-y-scroll h-[calc(100vh-320px)] flex flex-wrap content-start",children:i.length===0?t.jsx(it,{color:"#5ac0de",size:100}):$(i)})});Ie.propTypes={search:s.string.isRequired,stars:s.arrayOf(s.shape({label:s.string,checked:s.bool.isRequired,star:s.number.isRequired})).isRequired,currentType:s.shape({filterType:s.number.isRequired,type:s.number,growType:s.number.isRequired,label:s.string}).isRequired,nameOptions:s.arrayOf(s.shape({label:s.string.isRequired,checked:s.bool.isRequired})).isRequired};const Ba=d.memo(function(){const{t:e}=F(),c=z(),[a,r]=d.useState(""),[o,i]=d.useState({type:1,filterType:3,growType:1,label:e("attacker")}),[p,h]=d.useState([{label:"6",checked:!0,star:6},{label:"5",checked:!0,star:5},{label:"4",checked:!1,star:4},{label:"3",checked:!1,star:3},{label:"2",checked:!1,star:2},{label:"1",checked:!1,star:1}]),[u,$]=d.useState([{label:e("show"),checked:!0},{label:e("bold"),checked:!1}]),l=D(y=>y.dataset.formation);d.useEffect(()=>{$(y=>[{...y[0],label:e("show")},{...y[1],label:e("bold")}])},[e]);const g=y=>{const C=y.dataTransfer.getData("sid");if(C==="0")return;const q=l.map(I=>C!==I.id?I:{...I,type:0,backgroundImage:null,uniqueCode:0,dragOver:!1,queue:0,level:0});c(O(q))},k=y=>{y.preventDefault()};return t.jsxs("div",{className:"w-1/2 min-w-[760px] p-4 bg-black bg-opacity-30 rounded space-y-4",onDragOver:k,onDrop:g,children:[t.jsx(je,{currentType:o,setCurrentType:i}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Se,{stars:p,setStars:h}),t.jsx(Te,{nameOptions:u,setNameOptions:$})]}),t.jsx(Re,{search:a,setSearch:r}),t.jsx(Ie,{search:a,stars:p,currentType:o,nameOptions:u})]})}),_e=d.memo(function({optionKey:e,label:c}){const a=z(),r=D(i=>i.dataset.options,U),o=d.useCallback(i=>{a(qa({...r,...i}))},[a,r]);return t.jsx(ae,{shape:"round",color:"info",animation:"jelly",icon:t.jsx("i",{className:"mdi mdi-check"}),checked:r[e],onChange:i=>o({[e]:i.target.checked}),children:c})});_e.propTypes={optionKey:s.string.isRequired,label:s.string.isRequired};const Ha={type:"mercenary-type",queue:"mercenary-queue",backcolor:"background-color",backimage:"background-grid",reverse:"reverse"},Ka=d.memo(function(){const{t:e}=F(),c=d.useCallback(()=>Object.entries(Ha).map(([a,r])=>t.jsx(_e,{optionKey:a,label:e(r)},a)),[]);return t.jsxs("div",{children:[t.jsxs("span",{children:[e("show-content"),"："]}),c()]})}),Oe=d.memo(function(e){const{downloadSizeSelected:c,setDownloadSizeSelected:a,downloadSizeCustom:r,setDownloadSizeCustom:o}=e,{t:i}=F();d.useEffect(()=>{new ge(".tool-copylink")},[]);const p=[{value:1,name:700},{value:2,name:520},{value:3,name:420},{value:4,name:i("image-width-custom")}];return t.jsxs("div",{children:[t.jsxs("span",{children:[i("image-width"),"："]}),p.map(({value:h,name:u})=>t.jsx(ct,{name:"download-size",shape:"round",color:"info",animation:"jelly",icon:t.jsx("i",{className:"mdi mdi-check"}),value:h,checked:h===c,onChange:()=>a(h),children:h!==4?`${u}px`:u},`download-size-${h}`)),t.jsx("input",{type:"number",min:0,max:2e3,className:"p-1 w-16 h-6 text-white bg-gray-800 border border-gray-600 rounded",value:r,onChange:h=>o(h.target.value.replace(/\D/,"")),onFocus:()=>a(4)})," ","px"]})});Oe.propTypes={downloadSizeSelected:s.number.isRequired,setDownloadSizeSelected:s.func.isRequired,downloadSizeCustom:s.number.isRequired,setDownloadSizeCustom:s.func.isRequired};const Wa=[{value:1,name:700},{value:2,name:520},{value:3,name:420},{value:4,name:"image-width-custom"}],Ee=d.memo(function({downloadSizeSelected:e,downloadSizeCustom:c}){const a=z(),{t:r}=F(),{formation:o,queueMode:i,ref:p}=D(g=>({formation:g.dataset.formation,queueMode:g.dataset.queueMode,ref:g.dataset.ref}),U);d.useEffect(()=>{new ge(".tool-copylink")},[]);const h=d.useCallback(()=>{if(i)a(ke([])),a(le(!1));else{const g=o.map(k=>({...k,queue:0}));a(O(g)),a(le(!0))}},[a,o,i]),u=d.useCallback(async()=>{var k;const g=e!==4?(k=Wa.find(y=>y.value===e))==null?void 0:k.name:Number(c);if(!(Number(g)<=0))try{const y=await lt(document.getElementById(p),{skipFonts:!0}),C=await Oa(y,g),q=document.createElement("a");q.href=C,q.download=`output-${dt().format("YYYYMMDDTHmmss")}.png`,document.body.appendChild(q),q.click(),document.body.removeChild(q)}catch(y){console.error("Download error:",y)}},[e,c,p]),$=d.useCallback(()=>{a(Ca())},[a]),l=o.filter(g=>g.queue>0).length;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs(B,{onClick:$,color:"gray",children:[t.jsx(Xe,{size:"2em",color:"#fff"}),t.jsx("span",{children:r("reset")})]}),t.jsx(B,{onClick:h,color:i?"red-light":"red-dark",children:i?t.jsx(ne,{icon:t.jsx(et,{size:"2em",color:"#fff"}),label:`${r("queue")}(${l})`}):t.jsx(ne,{icon:t.jsx(tt,{size:"2em",color:"#fff"}),label:`${r("queue")}(${l})`})}),t.jsxs(B,{onClick:u,color:"blue",children:[t.jsx(rt,{size:"2em",color:"#fff"}),t.jsx("span",{children:r("download")})]})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("input",{id:"tool-copylink-text",className:"flex-grow p-1 text-md text-gray-400 bg-gray-900 border border-gray-600 rounded",value:window.location.href,readOnly:!0}),t.jsxs(B,{className:"tool-copylink",color:"green",dataClipboardTarget:"#tool-copylink-text",onClick:()=>{},children:[t.jsx(ot,{size:"1.5em",color:"#fff"}),t.jsx("span",{children:r("copylink")})]})]})]})}),B=d.memo(function({children:e,onClick:c,color:a,className:r,dataClipboardTarget:o}){const i="flex items-center justify-around w-36 h-10 border text-white rounded shadow",p={gray:"bg-gray-800 hover:bg-gray-700 active:bg-gray-600 border-gray-600","red-light":"bg-red-400 active:bg-red-600 border-red-600","red-dark":"bg-red-700 active:bg-red-600 border-red-600",blue:"bg-blue-600 hover:bg-blue-500 active:bg-blue-400 border-blue-400",green:"bg-green-600 border-green-400"};return t.jsx("button",{type:"button",className:`${i} ${p[a]} ${r||""}`,onClick:c,"data-clipboard-target":o,children:e})}),ne=d.memo(function({icon:e,label:c}){return t.jsxs("div",{className:"flex items-center justify-around w-full",children:[e,t.jsx("span",{children:c})]})});B.propTypes={children:s.node.isRequired,onClick:s.func.isRequired,color:s.oneOf(["gray","red-light","red-dark","blue","green"]).isRequired,className:s.string,dataClipboardTarget:s.string};ne.propTypes={icon:s.node.isRequired,label:s.string.isRequired};Ee.propTypes={downloadSizeSelected:s.number.isRequired,downloadSizeCustom:s.number.isRequired};const Qa=d.memo(function(){const[e,c]=d.useState(1),[a,r]=d.useState(0);return t.jsxs("div",{className:"flex flex-col p-4 bg-black bg-opacity-30 rounded space-y-4",children:[t.jsx(Ka,{}),t.jsx(Oe,{downloadSizeSelected:e,setDownloadSizeSelected:c,downloadSizeCustom:a,setDownloadSizeCustom:r}),t.jsx(Ee,{downloadSizeSelected:e,downloadSizeCustom:a})]})}),Ya=d.memo(function(){const[e,c]=d.useState(!1),{t:a}=F(),r=()=>{c(o=>!o)};return t.jsxs("footer",{className:"relative flex flex-col justify-start p-3",children:[t.jsxs("div",{className:"flex items-center select-none cursor-pointer",children:[t.jsx("a",{className:"footer-link mr-3 text-white hover:text-yellow-300",title:"GitHub",href:"https://github.com/explooosion/browndust-share",target:"_blank",rel:"noopener noreferrer",children:t.jsx(nt,{size:"2em"})}),t.jsx("a",{className:"footer-link mr-3 text-white hover:text-yellow-300",title:"Issue",href:"https://github.com/explooosion/browndust-share/issues",target:"_blank",rel:"noopener noreferrer",children:t.jsx(at,{size:"2.3em"})}),t.jsx("span",{className:"footer-link mr-3 text-white hover:text-yellow-300",onClick:r,children:t.jsx(st,{size:"2.3em"})})]}),t.jsx("div",{className:`absolute top-[-11rem] left-[9rem] mt-3 p-3 text-white bg-gray-900 border border-yellow-500 rounded-md transition-opacity duration-200 ease-in-out ${e?"opacity-100 visible":"opacity-0 invisible"}`,children:Array.from({length:6},(o,i)=>t.jsxs("span",{className:"block text-lg tracking-wider",children:[i+1,". ",a(`tip${i+1}`)]},i))}),t.jsx("span",{className:"fixed bottom-5 left-5 text-sm text-gray-400 hidden lg:block",children:"This site is fan-made and not affiliated with NEOWIZ and GAMFS in any way."})]})}),Ja=d.memo(function(){const e=z(),c=D(a=>a.dataset.formation);return d.useEffect(()=>{(async()=>{try{const[r,o]=await Promise.all([Ga(),za()]);e(xa(r)),e(fa(o)),e(O(La(c,o)))}catch(r){console.error("Error fetching data:",r)}})()},[]),t.jsx(He,{children:t.jsx("main",{className:"p-4",children:t.jsxs("div",{className:"mx-auto max-w-[1550px]",children:[t.jsx(Ua,{}),t.jsxs("section",{className:"flex-col md:flex-row flex items-start justify-around py-5 px-2 md:px-0",children:[t.jsxs("section",{className:"space-y-4",children:[t.jsx(Pa,{}),t.jsx(Qa,{}),t.jsx(Ya,{})]}),t.jsx(Ba,{})]})]})})})}),Va=document.getElementById("root");Le.createRoot(Va).render(t.jsx(Fe,{store:Ma,children:t.jsx(Ja,{})}));
